# Utilities / 工具函数

Bilingual index of utility functions found in `src/utilities`.

- canUseDOM.ts
  - EN: Utility to detect DOM availability.
  - CN: 检测 DOM 是否可用的工具函数。

- deepMerge.ts
  - EN: Deep merge utility for objects.
  - CN: 深度合并对象的工具函数。

- formatAuthors.ts
  - EN: Format authors list from relational data.
  - CN: 从关系数据格式化作者列表的工具。

- formatDateTime.ts
  - EN: Date/time formatting helper.
  - CN: 日期/时间格式化助手。

- generateMeta.ts
  - EN: Build Open Graph / SEO meta objects.
  - CN: 生成 Open Graph/SEO 元数据对象。

- generatePreviewPath.ts
  - EN: Build preview URL for a document (used by live preview).
  - CN: 生成文档预览 URL（供实时预览使用）。

- getDocument.ts
  - EN: Fetch and cache a single document from Payload.
  - CN: 从 Payload 获取并缓存单个文档。

- getGlobals.ts
  - EN: Fetch/cached globals via Payload and next/cache unstable_cache helper.
  - CN: 使用 next/cache 的 unstable_cache 缓存全局数据。

- getMeUser.ts
  - EN: Helper to fetch currently logged in user.
  - CN: 获取当前登录用户的辅助函数。

- getMediaUrl.ts
  - EN: Resolve media URL or static file URL.
  # Utilities / 工具函数

  Bilingual index of utility functions found in `src/utilities`.

  - canUseDOM.ts
    - EN: Utility to detect DOM availability.
    - CN: 检测 DOM 是否可用的工具函数。

  - deepMerge.ts
    - EN: Deep merge utility for objects.
    - CN: 深度合并对象的工具函数。

  - formatAuthors.ts
    - EN: Format authors list from relational data.
    - CN: 从关系数据格式化作者列表的工具。

  - formatDateTime.ts
    - EN: Date/time formatting helper.
    - CN: 日期/时间格式化助手。

  - generateMeta.ts
    - EN: Build Open Graph / SEO meta objects.
    - CN: 生成 Open Graph/SEO 元数据对象。

  - generatePreviewPath.ts
    - EN: Build preview URL for a document (used by live preview).
    - CN: 生成文档预览 URL（供实时预览使用）。

  - getDocument.ts
    - EN: Fetch and cache a single document from Payload.
    - CN: 从 Payload 获取并缓存单个文档。

  - getGlobals.ts
    - EN: Fetch/cached globals via Payload and next/cache unstable_cache helper.
    - CN: 使用 next/cache 的 unstable_cache 缓存全局数据。

  - getMeUser.ts
    - EN: Helper to fetch currently logged in user.
    - CN: 获取当前登录用户的辅助函数。

  - getMediaUrl.ts
    - EN: Resolve media URL or static file URL.
    - CN: 解析媒体 URL 或静态文件 URL。

  - getRedirects.ts
    - EN: Fetch/cached redirects collection.
    - CN: 获取并缓存 redirects 集合。

  - getURL.ts
    - EN: getServerSideURL & getClientSideURL utilities.
    - CN: 服务端与客户端 URL 工具函数。

  - mergeOpenGraph.ts
    - EN: Merge OG data strategies.
    - CN: 合并 Open Graph 数据的策略工具。

  - toKebabCase.ts
    - EN: Convert strings to kebab-case.
    - CN: 将字符串转换为 kebab-case（短横线命名）。

  - ui.ts
    - EN: UI helper exports used by components.
    # Utilities / 工具函数

    Bilingual index of utility functions found in `src/utilities`.

    - canUseDOM.ts
      - EN: Utility to detect DOM availability.
      - CN: 检测 DOM 是否可用的工具函数。

    - deepMerge.ts
      - EN: Deep merge utility for objects.
      - CN: 深度合并对象的工具函数。

    - formatAuthors.ts
      - EN: Format authors list from relational data.
      - CN: 从关系数据格式化作者列表的工具。

    - formatDateTime.ts
      - EN: Date/time formatting helper.
      - CN: 日期/时间格式化助手。

    - generateMeta.ts
      - EN: Build Open Graph / SEO meta objects.
      - CN: 生成 Open Graph/SEO 元数据对象。

    - generatePreviewPath.ts
      - EN: Build preview URL for a document (used by live preview).
      - CN: 生成文档预览 URL（供实时预览使用）。

    - getDocument.ts
      - EN: Fetch and cache a single document from Payload.
      - CN: 从 Payload 获取并缓存单个文档。

    - getGlobals.ts
      - EN: Fetch/cached globals via Payload and next/cache unstable_cache helper.
      - CN: 使用 next/cache 的 unstable_cache 缓存全局数据。

    - getMeUser.ts
      - EN: Helper to fetch currently logged in user.
      - CN: 获取当前登录用户的辅助函数。

    - getMediaUrl.ts
      - EN: Resolve media URL or static file URL.
      - CN: 解析媒体 URL 或静态文件 URL。

    - getRedirects.ts
      - EN: Fetch/cached redirects collection.
      - CN: 获取并缓存 redirects 集合。

    - getURL.ts
      - EN: getServerSideURL & getClientSideURL utilities.
      - CN: 服务端与客户端 URL 工具函数。

    - mergeOpenGraph.ts
      - EN: Merge OG data strategies.
      - CN: 合并 Open Graph 数据的策略工具。

    - toKebabCase.ts
      - EN: Convert strings to kebab-case.
      - CN: 将字符串转换为 kebab-case（短横线命名）。

    - ui.ts
      - EN: UI helper exports used by components.
      # Utilities / 工具函数

      Bilingual index of utility functions found in `src/utilities`.

      - canUseDOM.ts
        - EN: Utility to detect DOM availability.
        - CN: 检测 DOM 是否可用的工具函数。

      - deepMerge.ts
        - EN: Deep merge utility for objects.
        - CN: 深度合并对象的工具函数。

      - formatAuthors.ts
        - EN: Format authors list from relational data.
        - CN: 从关系数据格式化作者列表的工具。

      - formatDateTime.ts
        - EN: Date/time formatting helper.
        - CN: 日期/时间格式化助手。

      - generateMeta.ts
        - EN: Build Open Graph / SEO meta objects.
        - CN: 生成 Open Graph/SEO 元数据对象。

      - generatePreviewPath.ts
        - EN: Build preview URL for a document (used by live preview).
        - CN: 生成文档预览 URL（供实时预览使用）。

      - getDocument.ts
        - EN: Fetch and cache a single document from Payload.
        - CN: 从 Payload 获取并缓存单个文档。

      - getGlobals.ts
        - EN: Fetch/cached globals via Payload and next/cache unstable_cache helper.
        - CN: 使用 next/cache 的 unstable_cache 缓存全局数据。

      - getMeUser.ts
        - EN: Helper to fetch currently logged in user.
        - CN: 获取当前登录用户的辅助函数。

      - getMediaUrl.ts
        - EN: Resolve media URL or static file URL.
        - CN: 解析媒体 URL 或静态文件 URL。

      - getRedirects.ts
        - EN: Fetch/cached redirects collection.
        - CN: 获取并缓存 redirects 集合。

      - getURL.ts
        - EN: getServerSideURL & getClientSideURL utilities.
        - CN: 服务端与客户端 URL 工具函数。

      - mergeOpenGraph.ts
        - EN: Merge OG data strategies.
        - CN: 合并 Open Graph 数据的策略工具。

      - toKebabCase.ts
        - EN: Convert strings to kebab-case.
        - CN: 将字符串转换为 kebab-case（短横线命名）。

      - ui.ts
        - EN: UI helper exports used by components.
        - CN: 组件使用的 UI 辅助导出。
# Utilities / 工具函数

Bilingual index of utility functions found in `src/utilities`.

- canUseDOM.ts
  - EN: Utility to detect DOM availability.
  - CN: 检测 DOM 是否可用的工具函数。

- deepMerge.ts
  - EN: Deep merge utility for objects.
  - CN: 深度合并对象的工具函数。

- formatAuthors.ts
  - EN: Format authors list from relational data.
  - CN: 从关系数据格式化作者列表的工具。

- formatDateTime.ts
  - EN: Date/time formatting helper.
  - CN: 日期/时间格式化助手。

- generateMeta.ts
  - EN: Build Open Graph / SEO meta objects.
  - CN: 生成 Open Graph/SEO 元数据对象。

- generatePreviewPath.ts
  - EN: Build preview URL for a document (used by live preview).
  - CN: 生成文档预览 URL（供实时预览使用）。

- getDocument.ts
  - EN: Fetch and cache a single document from Payload.
  - CN: 从 Payload 获取并缓存单个文档。

- getGlobals.ts
  - EN: Fetch/cached globals via Payload and next/cache unstable_cache helper.
  - CN: 使用 next/cache 的 unstable_cache 缓存全局数据。

- getMeUser.ts
  - EN: Helper to fetch currently logged in user.
  - CN: 获取当前登录用户的辅助函数。

- getMediaUrl.ts
  - EN: Resolve media URL or static file URL.
  - CN: 解析媒体 URL 或静态文件 URL。

- getRedirects.ts
  - EN: Fetch/cached redirects collection.
  - CN: 获取并缓存 redirects 集合。

- getURL.ts
  - EN: getServerSideURL & getClientSideURL utilities.
  - CN: 服务端与客户端 URL 工具函数。

- mergeOpenGraph.ts
  - EN: Merge OG data strategies.
  - CN: 合并 Open Graph 数据的策略工具。

- toKebabCase.ts
  - EN: Convert strings to kebab-case.
  - CN: 将字符串转换为 kebab-case（短横线命名）。

- ui.ts
  - EN: UI helper exports used by components.
  - CN: 组件使用的 UI 辅助导出。

- useClickableCard.ts
  - EN: Hook to make an element behave as a clickable card.
  - CN: 使元素具有可点击卡片行为的 Hook。

- useDebounce.ts
  - EN: Debounce hook used by search or input handlers.
  - CN: 防抖 Hook（用于搜索或输入处理）。

## Reset password / 重置密码

If you've forgotten a user's password and cannot use the admin "forgot password" email flow, there is a local helper script to safely replace a user's password in the database.

1) Create or locate your MongoDB connection string (example: `mongodb://localhost:27017/your-db`).

2) Run the script (example):

```bash
DATABASE_URI="mongodb://localhost:27017/your-db" node scripts/reset-password.mjs --email=you@example.com --password=newPass123
```

Notes / 注意事项:

- The script hashes the password with bcrypt before writing it to the `users` collection.
- This directly modifies the database and will bypass any email verification flow — use only when necessary.
- Prefer using the admin UI "Forgot password" flow when available.
- Keep the DB URI and new password private and rotate credentials after use.

